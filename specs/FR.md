# Функциональные требования

1. Общеиспользуемые атрибуты для хранимых данных
    1. Идентификатор - [id][id]
    1. Время создания - [created][created]
    1. Время изменения - [updated][updated]
    1. Активность Контента - [active][active]
    1. Архивное хранения Контента - [archived][archived]
    1. Типы вопросов - [qtype][qtype]
    1. Владелец - [owner][owner]
    1. Порядок - [ordernum][ordernum]
1. [Общие условия возможности изменить Контент][change_content]
1. Модуль управления Контентом
    1. Вопрос - [question][question]
    1. Ответ - [answer][answer]
        1. Базовый Ответ
        1. Ответ для Вопроса Типа "Один из"
        1. Ответ для Вопрсоа Типа "Несколько из"
        1. Ответ для Вопрсоа Типа "Путанка"
    1. Опросник - [querylist][querylist]
       1. Наполнение Опросника - [querycontent][querycontent]
1. Модуль управления Заданиями
    1. Задача - [task][task]
    1. Расписание - [schedule][schedule]
1. Модуль выполнения Заданий
    1. Попытка - [attempt][attempt]
    1. Анкета - [anketa][anketa]
    1. Результаты - [result][result]
1. Модуль статистики и отчётов
    1. Dashboard
    1. Отчёты


## Общеиспольземые атрибуты для хранимых данных

### Идентификатор - <a name="id">id</a>

Обязательный для заполнения. Автоматическое заполнение средсвами framework Django.


### Время создания - <a name="created">created</a>

 1. Дата и время (datetime)
 2. Устанавливается при первом сохранении.
 3. При изменении не изменяется.


### Время изменения - <a name="updated">updated</a>
 1. Дата и время (datetime)
 2. Устанавливается при первом сохранении.
 3. При изменении переустанавливается.


### Активность Контента - <a name="active">active</a>

Значение | Описание
---|---
Да | Контент можно использовать при создании другого контента.
Нет | Контент нельзя использовать для создания другого контента.


### Архивное хранения Контента - <a name="archived">archived</a>

 Архивное хранение используется в следующих случаях:
 * Нет текущей потребности в использовании Контента, но она может возникнуть в будущем.
 * Контент или вышестоящий Контент удаляется, но он уже был использован при прохождении Задания.

Значение | Описание
---|---
Да | Контент переведён в режим хранения без использования.
Нет | Обычный Контент.


### Типы вопросов - <a name="qtype">qtype</a>

Тип | Значение | Описание
---|---|---
Один из | RADIOBUTTON | Должен быть выбран только один вариант
Несколько из | CHECKBOX | Может быть выбрано любое количество вариантов
Путанка | LINKEDLISTS | Для каждоко варианта должен быть быбран только один ответ


### Владелец - <a name="owner">owner</a>

Значение | Описание
---|---
Личность | ссылается на Личность, которая реализует право "Владелец"


### Порядок - <a name="ordernum">ordernum</a>

ordernum и другие поля, реализующие порядок следования могут быть не заполнены. Для ссключений в описании структуры данныъ должно быть указано такое требование.

При сортировке используются следующий порядок элементов:
  1. Сначала идут отсортированные по значению ordernum.
  2. Реальные значения не играют роли. Важно только их отношение больше-меньше.
  3. При равных значениях сортировка идёт по следующим атрибутам в условии сортировки, либо по-умолчанию.
  4. После нумерованных элементов идут элементы с путсм значением ordernum.


## Общие условия возможности <a name="change_content">изменить Контент</a>

 1. Только Владелец может изменить свой Контент.

 2. Контент нельзя изменить в случаях, когда:
    1. Контент опубликован
    2. У Контента атрибут Архивный установлен в значение "Да"
    3. Для вышележащего Контента атрибут Архивный установлен в значение "Да"


## Модуль управления Контентом

### Вопрос - <a name="question">question</a>

Атрибут|название поля таблицы|Обязательность|Описание
---|---|---|---
Идентификатор | id | Да |
Активный | active | Признак Да/Нет, что вопрос может быть использован при создании Контента
Архивный | archived |Признак Да/Нет, что испльзованный в Контенте Вопрос был удалён
Тип вопроса | qtype |
Создано | created | Да |
Изменено | updated | Да |
Владелец | owner | Да |


### Ответ - <a name="answer">answer</a>

1. При создании Ответа для Вопроса атрибут "Тип" копируется в атрибут "Тип" Ответа.
2. При изменении Ответа невозможно изменить атрибут "Тип".
3. Базовая сущность Ответ может быть уточнена сущностями-наследниками, которые добавляют атрибуты и функциональность.


#### Базовый Ответ

Атрибут|название поля таблицы|Обязательность|Описание
---|---|---|---
Идентификатор | id | Да |
Вопрос | question | Да | Идентификатор-ссылка на Вопрос
Вариант | content | Да | Текст варианта ответа на Вопрос
Порядок | ordernum | Нет | порядок варианта
Балл | score | Нет | Количество баллов за выбор этого варианта
Тип | qtype | Да | Тип вопроса
Создано | created | Да |
Изменено | updated | Да |


#### Ответ для Вопроса Типа "Один из"

Совпадает с Базовым Ответом.


#### Ответ для Вопрсоа Типа "Несколько из"

Совпадает с Базовым Ответом.


#### Ответ для Вопроса Типа "Путанка"

Для каждого Варианта имеет свой собственный связанный ответ с дополнительными атрибутами:

Атрибут|название поля таблицы|Обязательность|Описание
---|---|---|---
Связаный ответ | linkeditem | Да | связанный ответ
Порядок ответа | ordernumitem | Нет | порядок связанного ответа


### Опросник - <a name="querylist">querylist</a>

 Атрибут|название поля таблицы|Обязательность|Описание
---|---|---|---
Идентификатор | id | Да | автоматическое, ведётся Framework
Название | name| Да |
Описание | description | Да |
Активный | active | Да |
Архивный | archived | Да |
Создано | created | Да |
Изменено | updated | Да |
Владелец | owner | Да |


#### Наполнение Опросника - <a name="querycontent">querycontent</a>

 Атрибут|название поля таблицы|Обязательность|Описание
---|---|---|---
Идентификатор | id | Да | автоматическое, ведётся Framework
Опросник | querylist | Да | ссылка на Опросник
Вопрос | question | Да | cссылка на Вопрос
Порядок | ordernum | Нет | Номер, в порядке которого дожен быть отражён вопрос при выполнеии Задания на базе Опросника
Создано | created | Да |
Изменено | updated | Да |

Сохранение элемента Наполнения Опросника также изменяет значение атрибута "Время модификации" самого Опросника.

Удаление элемента Наполнения Опросника также изменяет значение атрибута "Время модификации" самого Опросника.

Добавление нового элемента Наполнения Опросника также изменяет значение атрибута "Время модификации" самого Опросника.


### Задача - <a name="task">task</a>

 Атрибут|название поля таблицы|Обязательность|Описание
---|---|---|---
Идентификатор | id | Да | автоматическое, ведётся Framework
Опросник | querylist | Да | ссылка на Опросник
Название | name| Да |
Описание | description | Да |
Попытки | attempts | Да | Максимальное количество попыток
Просмотр viewable | Да | Признак Да/Нет - можно-ли просматривать свои ответы
Изменение | editable | Да | Признак Да/Нет - можно-ли редактировать уже данные ответы
Автозакрытие | autoclose | Да | Признак Да/Нет - автозакрытие поптыки когда есть ответы на все вопросы
Создано | created | Да |
Изменено | updated | Да |
Владелец | owner | Да |


### Расписание - <a name="schedule">schedule</a>

 Атрибут|название поля таблицы|Обязательность|Описание
---|---|---|---
Идентификатор | id | Да | автоматическое, ведётся Framework
Задача | task | Да | ссылка на Задачу
Название | name| Да |
Описание | description | Да |
Старт | start | Да | datetime - Начало интервала доступности Задания
Финиш | finish | Да | datetime - Конец интервала доступности Задания
Создано | created | Да |
Изменено | updated | Да |
Владелец | owner | Да |


## Модуль выполнения Заданий


### Попытка - <a name="attempt">attempt</a>

 Атрибут|название поля таблицы|Обязательность|Описание
---|---|---|---
Идентификатор | id | Да | автоматическое, ведётся Framework
Расписание | schedule |
Начато | started | datetime - когда Пользователь подтвердил начало выполнения Задания
Закончено | finished | datetime - когда произошло автосохранение Поптыки или подтверждение Пользователем завершения Попытки.
Пользователь | user | Да | устанавливается в значение текущего Пользователя


### Анкета - <a name="anketa">anketa</a>

 Атрибут|название поля таблицы|Обязательность|Описание
---|---|---|---
Идентификатор | id | Да | автоматическое, ведётся Framework
Попытка | attempt | Да |
Вопрос | question | Да |
Отвечено | created | Да |
Изменено | updated | Да |
Порядок | ordernum | Нет| Номер, под которым задаётся вопрос.

Анкета генерируется в момент начала выполнения Задания, сразу после генерации Анкеты. Порядок следования вопросов фиксируется при генерации Анкеты.


### Результаты - <a name="result">result</a>

 Атрибут|название поля таблицы|Обязательность|Описание
---|---|---|---
Идентификатор | id | Да |
Анкета| anketa | Да |
Вариант | answer | Да | Выбранный вариант Ответа на Вопрос
Отвечено | created | Да |
Изменено | updated | Да |


## Модуль статистики и отчётов


### Dashboard


### Отчёты

[id]: #id
[created]: #created
[updated]: #updated
[active]: #active
[archived]: #archived
[qtype]: #qtype
[owner]: #owner
[ordernum]: #ordernum
[change_content]: #change_content
[question]: #question
[answer]: #answer
[querylist]: #querylist
[querycontent]: #querycontent
[task]: #task
[schedule]: #schedule
[attempt]: #attempt
[anketa]: #anketa
[result]: #result
