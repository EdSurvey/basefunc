# <a name="top">Функциональные требования</a>

1. Общеиспользуемые атрибуты для хранимых данных
    1. Идентификатор ([FR_id][FR_id])
    1. Время создания ([FR_created][FR_created])
    1. Время изменения ([FR_updated][FR_updated])
    1. Активность Контента ([FR_active][FR_active])
    1. Архивное хранения Контента ([FR_archived][FR_archived])
    1. Типы вопросов ([FR_qtype][FR_qtype])
    1. Владелец ([FR_owner][FR_owner])
    1. Порядок ([FR_ordernum][FR_ordernum])
1. Общие условия возможности изменить Контент ([FR_change_content][FR_change_content])
1. Модуль управления Контентом
    1. Вопрос ([FR_question][FR_question])
    1. Ответ ([FR_answer][FR_answer])
        1. Базовый Ответ
        1. Ответ для Вопроса Типа "Один из"
        1. Ответ для Вопрсоа Типа "Несколько из"
        1. Ответ для Вопрсоа Типа "Путанка"
    1. Опросник ([FR_querylist][FR_querylist])
       1. Наполнение Опросника ([FR_querycontent][FR_querycontent])
1. Модуль управления Заданиями
    1. Задача ([FR_task][FR_task])
    1. Расписание ([FR_schedule][FR_schedule])
1. Модуль выполнения Заданий
    1. Попытка ([FR_attempt][FR_attempt])
    1. Анкета ([FR_anketa][FR_anketa])
    1. Результаты ([FR_result][FR_result])
1. Модуль статистики и отчётов
    1. Dashboard
    1. Отчёты


## Общеиспольземые атрибуты для хранимых данных
[в начало][top]


### Идентификатор (<a name="FR_id">FR_id</a>)

 1. Имя поля в таблице БД - "id"
 1. Обязательный для заполнения.
 1. Автоматическое заполнение средсвами framework Django.

[в начало][top]


### Время создания (<a name="FR_created">FR_created</a>)

 1. Имя поля в таблице БД - "created"
 1. Тип данных - Дата и время (datetime)
 1. Устанавливается при первом сохранении.
 1. При изменении не изменяется.

[в начало][top]


### Время изменения (<a name="FR_updated">FR_updated</a>)

 1. Имя поля в таблице БД - "updated"
 1. Тип данных - Дата и время (datetime)
 1. Устанавливается при первом сохранении.
 1. При изменении переустанавливается.

[в начало][top]


### Активность Контента (<a name="FR_active">FR_active</a>)

 1. Имя поля в таблице БД - "active"
 1. Тип данных - Логическое (boolean)

Значение | Описание
---|---
Да | Контент можно использовать при создании другого контента.
Нет | Контент нельзя использовать для создания другого контента.

[в начало][top]


### Архивное хранения Контента (<a name="FR_archived">FR_archived</a>)

 1. Имя поля в таблице БД - "archived"
 1. Тип данных - Логическое (boolean)
 1. Архивное хранение используется в следующих случаях:
    1. Нет текущей потребности в использовании Контента, но она может возникнуть в будущем.
    1. Контент или вышестоящий Контент удаляется, но он уже был использован при прохождении Задания.

Значение | Описание
---|---
Да | Контент переведён в режим хранения без использования.
Нет | Обычный Контент.

[в начало][top]


### Типы вопросов (<a name="FR_qtype">FR_qtype</a>)

 1. Имя поля в таблице БД - "qtype"
 1. Тип данных - строка(2)

Тип | Значение | Описание
---|---|---
Один из | RADIOBUTTON | Должен быть выбран только один вариант
Несколько из | CHECKBOX | Может быть выбрано любое количество вариантов
Путанка | LINKEDLISTS | Для каждоко варианта должен быть быбран только один ответ

[в начало][top]


### Владелец (<a name="FR_owner">FR_owner</a>)

 1. Имя поля в таблице БД - "owner"
 1. Тип данных - "id"
 1. Значение - ссылается на Личность, которая реализует право "Владелец"

[в начало][top]


### Порядок (<a name="FR_ordernum">FR_ordernum</a>)

 1. Имя поля в таблице БД - начинаются с "ordernum"
 1. Тип данных - положительное целое
 1. ordernum и другие поля, реализующие порядок следования могут быть не заполнены. Для исключений в описании структуры данных должно быть указано такое требование.
 1. При сортировке используются следующий порядок элементов:
    1. Сначала идут отсортированные по значению ordernum.
    1. Реальные значения не играют роли. Важно только их отношение больше-меньше.
    1. При равных значениях сортировка идёт по следующим атрибутам в условии сортировки, либо по-умолчанию.
    1. После нумерованных элементов идут элементы с путсм значением ordernum.

[в начало][top]


## Общие условия возможности изменить Контент (<a name="FR_change_content">FR_change_content</a>)

 1. Только Владелец может изменить свой Контент.
 2. Контент нельзя изменить в случаях, когда:
    1. Контент опубликован
    2. У Контента атрибут Архивный установлен в значение "Да"
    3. Для вышележащего Контента атрибут Архивный установлен в значение "Да"

[в начало][top]


## Модуль управления Контентом

[в начало][top]

### Вопрос (<a name="FR_question">FR_question</a>)

Атрибут|название поля таблицы|Обязательность|Описание
---|---|---|---
Идентификатор | id | Да |
Активный | active | Признак Да/Нет, что вопрос может быть использован при создании Контента
Архивный | archived |Признак Да/Нет, что испльзованный в Контенте Вопрос был удалён
Тип вопроса | qtype |
Создано | created | Да |
Изменено | updated | Да |
Владелец | owner | Да |

[в начало][top]


### Ответ (<a name="FR_answer">FR_answer</a>)

1. При создании Ответа для Вопроса атрибут "Тип" копируется в атрибут "Тип" Ответа.
2. При изменении Ответа невозможно изменить атрибут "Тип".
3. Базовая сущность Ответ может быть уточнена сущностями-наследниками, которые добавляют атрибуты и функциональность.

[в начало][top]


#### Базовый Ответ

Атрибут|название поля таблицы|Обязательность|Описание
---|---|---|---
Идентификатор | id | Да |
Вопрос | question | Да | Идентификатор-ссылка на Вопрос
Вариант | content | Да | Текст варианта ответа на Вопрос
Порядок | ordernum | Нет | порядок варианта
Балл | score | Нет | Количество баллов за выбор этого варианта
Тип | qtype | Да | Тип вопроса
Создано | created | Да |
Изменено | updated | Да |

[в начало][top]


#### Ответ для Вопроса Типа "Один из"

Совпадает с Базовым Ответом.

[в начало][top]


#### Ответ для Вопрсоа Типа "Несколько из"

Совпадает с Базовым Ответом.

[в начало][top]


#### Ответ для Вопроса Типа "Путанка"

Для каждого Варианта имеет свой собственный связанный ответ с дополнительными атрибутами:

Атрибут|название поля таблицы|Обязательность|Описание
---|---|---|---
Связаный ответ | linkeditem | Да | связанный ответ
Порядок ответа | ordernumitem | Нет | порядок связанного ответа

[в начало][top]


### Опросник (<a name="FR_querylist">FR_querylist</a>)

 Атрибут|название поля таблицы|Обязательность|Описание
---|---|---|---
Идентификатор | id | Да |
Название | name| Да |
Описание | description | Да |
Активный | active | Да |
Архивный | archived | Да |
Создано | created | Да |
Изменено | updated | Да |
Владелец | owner | Да |

[в начало][top]


#### Наполнение Опросника (<a name="FR_querycontent">FR_querycontent</a>)

 Атрибут|название поля таблицы|Обязательность|Описание
---|---|---|---
Идентификатор | id | Да |
Опросник | querylist | Да | ссылка на Опросник
Вопрос | question | Да | cссылка на Вопрос
Порядок | ordernum | Нет | Номер, в порядке которого дожен быть отражён вопрос при выполнеии Задания на базе Опросника
Создано | created | Да |
Изменено | updated | Да |

Сохранение элемента Наполнения Опросника также изменяет значение атрибута "Время модификации" самого Опросника.

Удаление элемента Наполнения Опросника также изменяет значение атрибута "Время модификации" самого Опросника.

Добавление нового элемента Наполнения Опросника также изменяет значение атрибута "Время модификации" самого Опросника.

[в начало][top]


### Задача (<a name="FR_task">FR_task</a>)

 Атрибут|название поля таблицы|Обязательность|Описание
---|---|---|---
Идентификатор | id | Да |
Опросник | querylist | Да | ссылка на Опросник
Название | name| Да |
Описание | description | Да |
Попытки | attempts | Да | Максимальное количество попыток
Просмотр viewable | Да | Признак Да/Нет - можно-ли просматривать свои ответы
Изменение | editable | Да | Признак Да/Нет - можно-ли редактировать уже данные ответы
Автозакрытие | autoclose | Да | Признак Да/Нет - автозакрытие поптыки когда есть ответы на все вопросы
Создано | created | Да |
Изменено | updated | Да |
Владелец | owner | Да |

[в начало][top]


### Расписание (<a name="FR_schedule">FR_schedule</a>)

 Атрибут|название поля таблицы|Обязательность|Описание
---|---|---|---
Идентификатор | id | Да |
Задача | task | Да | ссылка на Задачу
Название | name| Да |
Описание | description | Да |
Старт | start | Да | datetime - Начало интервала доступности Задания
Финиш | finish | Да | datetime - Конец интервала доступности Задания
Создано | created | Да |
Изменено | updated | Да |
Владелец | owner | Да |

[в начало][top]


## Модуль выполнения Заданий

[в начало][top]


### Попытка (<a name="FR_attempt">FR_attempt</a>)

 Атрибут|название поля таблицы|Обязательность|Описание
---|---|---|---
Идентификатор | id | Да |
Расписание | schedule |
Начато | started | datetime - когда Пользователь подтвердил начало выполнения Задания
Закончено | finished | datetime - когда произошло автосохранение Поптыки или подтверждение Пользователем завершения Попытки.
Пользователь | user | Да | устанавливается в значение текущего Пользователя

[в начало][top]


### Анкета (<a name="FR_anketa">FR_anketa</a>)

 Атрибут|название поля таблицы|Обязательность|Описание
---|---|---|---
Идентификатор | id | Да |
Попытка | attempt | Да |
Вопрос | question | Да |
Отвечено | created | Да |
Изменено | updated | Да |
Порядок | ordernum | Нет| Номер, под которым задаётся вопрос.

Анкета генерируется в момент начала выполнения Задания, сразу после генерации Анкеты. Порядок следования вопросов фиксируется при генерации Анкеты.

[в начало][top]


### Результаты (<a name="FR_result">FR_result</a>)

 Атрибут|название поля таблицы|Обязательность|Описание
---|---|---|---
Идентификатор | id | Да |
Анкета| anketa | Да |
Вариант | answer | Да | Выбранный вариант Ответа на Вопрос
Отвечено | created | Да |
Изменено | updated | Да |

[в начало][top]


## Модуль статистики и отчётов

[в начало][top]


### Dashboard

[в начало][top]


### Отчёты

[в начало][top]


[top]: #top
[FR_id]: #FR_id
[FR_created]: #FR_created
[FR_updated]: #FR_updated
[FR_active]: #FR_active
[FR_archived]: #FR_archived
[FR_qtype]: #FR_qtype
[FR_owner]: #FR_owner
[FR_ordernum]: #FR_ordernum
[FR_change_content]: #FR_change_content
[FR_question]: #FR_question
[FR_answer]: #FR_answer
[FR_querylist]: #FR_querylist
[FR_querycontent]: #FR_querycontent
[FR_task]: #FR_task
[FR_schedule]: #FR_schedule
[FR_attempt]: #FR_attempt
[FR_anketa]: #FR_anketa
[FR_result]: #FR_result
